%----------------------------------------------------------------------------------------------------------------------
% This file is the configuration file for K600 data. It should take the form of the global definitions at the top:
% ADCModules
% TDCModules
% NumberOfMMM/W1s
% Then, after that lot, the channel definitions for each detector which should be in the form:
% MMMADCChannels
% 1	FirstChannel	LastChannel
% 2	FirstChannel	LastChannel
% n	FirstChannel	LastChannel
% MMMADCChannels

% This should be repeated for all detectors (any detector not defined like this will be ignored.
% Then:
% MMMTDCChannels
% 1	FirstChannel	LastChannel etc.
%
% This should be repeated for all types of detector in the system. If a new type of ancillary detector system is added, 
% the person doing that needs to add the information about how the configuration file should be read in in ReadConfiguration 
% in Parameters.c
%----------------------------------------------------------------------------------------------------------------------


ADCModules	3

TDCModules	7

NumberOfMMM	0

% MMMADCChannels
%1	pside	0	15
%1	nside	80	87
%2	pside	16	31
%2	nside	88	95
%3	pside	32	47
%3	nside	96	103
%4	pside	48	63
%4	nside	104	111
%5	pside	64	79
%5	nside	112	119
%MMMADCChannels

%MMMTDCChannels
%1	pside	880	895
%1	nside	656	663
%2	pside	864	879
%2	nside	664	671
%3	pside	848	863
%3	nside	816	823
%4	pside	832	847
%4	nside	824	831
%5	pside	704	719
%5	nside	912	919
%MMMTDCChannels

%NumberOfW1	2

%W1ADCChannels
%1	pside	0	15
%1	nside	32	47
%2	pside	16	31
%2 	nside	48	63
%W1ADCChannels

%W1TDCChannels
%1	pside	816	831
%1	nside	848	863
%2	pside	832	847
%2	nside	863	879
%W1TDCChannels

%----------------------------------------------------------------------------------------------------------------------
%                If Hagar is present, next line should read 'yes' otherwise it should read 'no'
%----------------------------------------------------------------------------------------------------------------------

HagarUsed no

%HagarADCChannels
%96	103
%HagarADCChannels

%HagarTDCChannels
%688	695
%HagarTDCChannels

%----------------------------------------------------------------------------------------------------------------------
%                If CLovers are present, next line should read 'yes' otherwise it should read 'no'
%----------------------------------------------------------------------------------------------------------------------
CloverUsed yes

NumberOfClover 12

CloverADCChannels
1 32 35
2 36 39
3 40 43
4 44 47
5 48 51
6 52 55
7 56 59
8 60 63
9 64 67
10 68 71
11 72 75
12 76 79
CloverADCChannels

CloverTDCChannels
1 848 851
2 852 855
3 856 859
4 860 863
5 864 867
6 868 871
7 872 875
8 876 879
9 880 883
10 884 887
11 888 891
12 892 895
CloverTDCChannels

%----------------------------------------------------------------------------------------------------------------------
%                If other scintillators are present, next line should read 'yes' otherwise it should read 'no'
%----------------------------------------------------------------------------------------------------------------------
ScintillatorUsed yes

NumberOfScintillator 10

ScintillatorADCChannels
1 8
2 9
3 10
4 11
5 12
6 24
7 25
8 26
9 27
10 28
ScintillatorADCChannels

ScintillatorTDCChannels
1 840	
2 841
3 842
4 843
5 844
6 840
7 841
8 842
9 843
10 844
ScintillatorTDCChannels


%----------------------------------------------------------------
% 	VDC related issues
%----------------------------------------------------------------

VDC1 new
VDC2 old 

VDCSeparationDistanceZ 270
VDCSeparationDistanceX 354

ThFPSCATOffsetTerms 3
0 1
1 0.0
2 0.0
EndThFPSCATOffsetTerms

ThFPSCATSlopeTerms 3
0 1
1 0.0
2 0.0
EndThFPSCATSlopeTerms

% the first term of the ThSCATCorrectionTerm is always 1, it plays not role in the correction
ThSCATCorrectionTerms 4
0 1
1 -0.0
2 -0.0
3 +0.0
EndThSCATCorrectionTerms

% Correction of the form ((ThSCAT)^n)*(X)^n
ThSCATXCorrectionTerms 3
0 1
1 +0
2 +0
EndThSCATXCorrectionTerms

% Correction of the form ((ThSCAT)^n)*(X-XLineshapeOffset)
% Note: The number of CorrectionTerms is for the Parameters excluding XLineshapeOffset
ThSCATXLoffCorrectionTerms 3
XLineshapeOffset 651.4
0 1
1 +0
2 -0.0
EndThSCATXLoffCorrectionTerms

Y1CorrectionTerms 3
0 1.37532
1 -0.33353
2 0.00397936
EndY1CorrectionTerms

%%params from run10019 with xoffsets relative to Run10015
%0 -1.50061
%1 0.0794642
%2 -0.00587481



% Correction of the form ((TOF-TOFoffset)^n)
% This correction is normally used in the absence of a 2nd VDC, when 
% reliable angle info is not available. So only Y and TOF corrections then to be used.
% Note: The number of CorrectionTerms is for the Parameters excluding TOFLineshapeOffset%X1refpeaknocorr 249 

%params from run20007 with xoffsets relative to Run20007
TOFCorrectionTerms 6
TOFLineshapeOffset 2240
X1LineshapeOffset 608   
X1refpeaknocorr 200 
0 0.640688
1 -0.112449
2 -0.00229862
3 -5.02033e-05
4 1.11743e-06
5 4.09239e-08
EndTOFCorrectionTerms

%params from run10019 with xoffsets relative to Run10015
%
%TOFCorrectionTerms 6
%TOFLineshapeOffset 2245
%X1LineshapeOffset 615   
%X1refpeaknocorr 200 
%0 0.379
%1 -0.1221
%2 -0.002649
%3 -3.041e-05
%4 1.486e-06
%5 2.181e-08
%EndTOFCorrectionTerms

%0 0.261525
%1 -0.127356
%2 -0.00282158
%3 -2.56051e-05
%4 1.71343e-06
%5 2.32962e-08


%-------------------------------------------------------------------------------------------------------------
% If, like me, you do a momentum/rigidity calibration of the focal plane, you need to put in your calibration 
% in the section below - Brho comes from a quadratic fit of the focal plane currently but you can use higher 
% or lower-order polynomials by changing the number after RigidityCalibration
%--------------------------------------------------------------------------------------------------------------

%Params from chained runs 20... (feb2022)
RigidityCalibration 3
0 2919.4
1 0.310757
2 -2.8279e-05

EndRigidityCalibration


%Last used rigidity in 2021
%0 2917.27
%1 0.30612
%2 -2.09945e-05

%par0  2922.95; par1 0.298032; par2 -1.49303e-05

%Mgthin but incorrect offsets
%0 2921.495
%1 0.300883
%2 -1.647325E-05

%Using 144SM rig params average between dnstr and upstr beam 120.60 - 
%0 2920.55
%1 0.307587
%2 -2.58237e-05


%upstream beam values
%0 2916.56
%1 0.312154
%2 -2.81669e-05

%average rig between dnstr and upstr beam 120.60 - use this one
%0 2916.77
%1 0.311872
%2 -2.81023e-05

%downstream beam 120.402 on actual target thick
%0 2916.98
%1 0.311589
%2 -2.80377e-05

%old PR298 values used
%0 2867
%1 0.323
%2 -3.49186e-05

%gaus peak only fit params
%0 2868.99
%1 0.316599
%2 -2.89418e-05


%----------------------------------------------------------------
% 	Kinematics related issues
%----------------------------------------------------------------

% BeamEnergy given in MeV

%BeamEnergy 117.145 %target 4.0mg/cm2 - PR298 runs 10... Ebeam= 117.39 
%BeamEnergy 120.35 %target 4.0mg/cm2 - PR298 runs 20... Ebeam= 120.59 
%BeamEnergy 120.402 %beam downstream value target 3.3070mg/cm2 Ebeam= 120.60
%BeamEnergy 120.36 %beam downstream value target 3.7620mg/cm2 Ebeam= 120.60
%BeamEnergy 117.188 %beam downstream value target 3.3070mg/cm2 Ebeam= 117.39
%BeamEnergy 120.459 %beam downstream value target 3.7620mg/cm2 Ebeam= 120.60

%BeamEnergy 120.5295 %144Sm - average between beam and downstream value target 3.7620mg/cm2 Ebeam= 120.60
%BeamEnergy 120.459 %144Sm - beam downstream value target 3.7620mg/cm2 Ebeam= 120.60
%BeamEnergy 120.59 %actual beam energy
%BeamEnergy 120.501 %24Mg - average between beam and downstream value target 3.3070mg/cm2 Ebeam= 120.60
%BeamEnergy 120.40183 %24Mg - downstream value target 3.3070mg/cm2 Ebeam= 120.60
%BeamEnergy 120.558068 %24Mg - downstream value target 3.3070mg/cm2 Ebeam= 120.60

%BeamEnergy 120.413 %142Nd - beam downstream value target 4.63mg/cm2 Ebeam= 120.59
%BeamEnergy 120.469 %144Sm - beam downstream value target 3.23mg/cm2 Ebeam= 120.59
BeamEnergy 120.392 %24Mg - beam downstream value target 3.070 mg/cm2 Ebeam= 120.59

InelasticScattering true

ScatteringAngle 0

% nuclei rest masses in MeV:
%mass1 938.27231

% 3He
%mass1 2809.412035

% 4He
mass1 3728.400952

% 16O
%mass2 15007.581249

% 24Mg
mass2 22341.92265

% 26Mg
%mass2 24202.62965

% 154Sm
%mass2 143377.6158

% 144Sm
%mass2 134053.1653

% 142Nd
%mass2 132155.5527

%24Mg, using atomic mass, subtracting electron mass, multiply with MeV/u
%23.985041697 - 12*5.48579909070e-4   = 2.39784587380911596e+01
%931.4940954*(23.985041697 - 12*5.48579909070e-4)   = 2.23357927313244509e+04

%4He
%4.00260325413  - 2*5.48579909070e-4  =  4.00150609431186055e+00
%931.4940954*(4.00260325413  - 2*5.48579909070e-4)  =  3.72737929955861364e+03


% 26Mg
% mass2 24202.62965
% 27Al
% mass2 25133.14158
% 28Si 
% mass2 26060.33946
% masses 3 and 4 only need to be defined for reactions that are not inelastic scattering
% mass3
% mass4 

%----------------------------------------------------------------------------------------------------------------------
% File for calibration stuff - should be of the form: channel number_of_parameters(N) par_0 par_1 par_2... where E = sum-i_0^N(par_i * pow(adc,i));
% Now, if the calibration should not be set, change the file name to 'ignore'
% The calibration file should terminate with a line reading 'eof'
% Be careful! The calibration file can currently not be allowed to miss any numbers, otherwise things will go terribly wrong!
%----------------------------------------------------------------------------------------------------------------------
%CalibrationFile	/vicepda/althome/k600user/PR254/calibration/CalibParsPR254Run63Mod.dat
%CalibrationFile         QuickCalibPars_PR283_Run222-23_17Nov2018.dat
%CalibrationFile         QuickCalibPars_PR283.dat 
%CalibrationFile          CalibPars_PR298_Run508_509.dat
%CalibrationFile          CalibParsPR298_Eu-CsCo_Oct2019.dat
%CalibrationFile          CalibParsPR283_Runs411-503_March2020.dat  
CalibrationFile         ignore
%CalibrationFile          CalibParsPR298_24Mg_18May2019.dat
%CalibrationFile          CalibParsPR298_24Mg_9May2019_runsBelow10152.dat
%CalibrationFile          CalibPars_PR283_RN_Sept2021-LaBr3.dat

%----------------------------------------------------------------------------------------------------------------------
% File for X1 offsets
% Due to (mostly SSC related RF) changes/drifts, the peaks in the focal plane spectrum may change slightly,
% but significantly, from run to run.
% Your job is to determine those changes relative to a zeroth run and put them in the X1offsets file
% in the form:   run number  delta-X
% Now, if no such offsets are to be used, change the file name to 'ignore' and the nr to 0
% Final and important note: the offsets file should terminate with a line reading 'eof'
%----------------------------------------------------------------------------------------------------------------------
%NrOfX1Offsets   25
%XOffsetsFile    22Feb22_Nd_X1offset.dat
%NrOfX1Offsets   77
%XOffsetsFile    X1offsetsPR298_24Mg_run20007.dat
%NrOfX1Offsets  0
%XOffsetsFile   ignore
%NrOfX1Offsets   281
%XOffsetsFile    X1offsetsPR298_9April2019.dat  
%use this above
%XOffsetsFile    X1offsetsPR298_feb2019.dat
%PR283
%NrOfX1Offsets  54
%XOffsetsFile   X1offsetsPR283_feb2020.dat
NrOfX1Offsets   45
XOffsetsFile    X1offsetsPR298_emptyruns.dat


%----------------------------------------------------------------------------------------------------------------------
% File for tof offsets
% Due to SSC related RF) changes, the pid may change slightly, but significantly, in time from run to run.
% Your job is to determine those changes relative to a zeroth run and put them in the TOFoffsets file
% in the form:   run number  delta-tof
% Now, if no such offsets are to be used, change the file name to 'ignore' and the nr to 0
% Final and important note: the offsets file should terminate with a line reading 'eof'
%----------------------------------------------------------------------------------------------------------------------
%NrOfTOFOffsets  0
%TOFOffsetsFile  ignore
%NrOfTOFOffsets  25
%TOFOffsetsFile  22Feb22_Nd_ToFoffset.dat
%NrOfTOFOffsets   284
%TOFOffsetsFile   TOFoffsetsPR298_feb2019.dat
%NrOfTOFOffsets   54
%TOFOffsetsFile   TOFoffsetsPR283_feb2020.dat
NrOfTOFOffsets   45
TOFOffsetsFile   ToFoffsetsPR298_emptyruns.dat


%----------------------------------------------------------------------------------------------------------------------
% File for pad offsets
% 
% Your job is to determine those changes relative to a zeroth run and put them in the Padoffsets file
% in the form:   run number  delta-pad
% Now, if no such offsets are to be used, change the file name to 'ignore' and the nr to 0
% Final and important note: the offsets file should terminate with a line reading 'eof'
%----------------------------------------------------------------------------------------------------------------------
%NrOfPadOffsets  0
%PadOffsetsFile  ignore
%NrOfPadOffsets   25
%PadOffsetsFile   22Feb22_Nd_PADoffset.dat
%NrOfPadOffsets   284
%PadOffsetsFile   PAD1offsetsPR298_feb2019.dat
%NrOfPadOffsets   54
%PadOffsetsFile   PAD1offsetsPR283_feb2020.dat
NrOfPadOffsets   45
PadOffsetsFile   PAD1offsetsPR298_emptyruns.dat


%----------------------------------------------------------------------------------------------------------------------
% File for Y1 offsets
% When beam fluctuations present in vertical plane
% Your job is to determine those changes relative to a zeroth run and put them in the Y1offsets file
% in the form:   run number  delta-Y1
% Now, if no such offsets are to be used, change the file name to 'ignore' and the nr to 0
% Final and important note: the offsets file should terminate with a line reading 'eof'
%----------------------------------------------------------------------------------------------------------------------
%NrOfY1Offsets   0
%Y1OffsetsFile   ignore
%NrOfY1Offsets   25
%Y1OffsetsFile   22Feb22_Nd_Y1offset.dat
%NrOfY1Offsets   281
%Y1OffsetsFile   Y1offsetsPR298_17April2019.dat
%NrOfY1Offsets   54
%Y1OffsetsFile   Y1offsetsPR283_feb2020.dat
NrOfY1Offsets   45
Y1OffsetsFile   Y1offsetsPR298_emptyruns.dat


%----------------------------------------------------------------------------------------------------------------------
% File for GammaTime offsets
% 
% Your job is to determine those changes relative to a zeroth run and put them in the GammaTimeoffsets file
% in the form:   det number  delta-GammaTime

% IMPORTANT!!!!! that the numbers for the CLOVERs are Segm+(Det-1)*4 and for the SCINTILLATORs Det+100

% Now, if no such offsets are to be used, change the file name to 'ignore' and the nr to 0
% Final and important note: the offsets file should terminate with a line reading 'eof'
%----------------------------------------------------------------------------------------------------------------------
NrOfGammaTimeOffsets   53
%GammaTimeOffsetsFile   GammaTimeOffsetsPR251_13July2018.dat
%GammaTimeOffsetsFile    GammaTimeOffsetsPR283_run403_6April2020_gaus2.dat
GammaTimeOffsetsFile   GammaTimeOffsetsPR298_7April2020_gaus2.dat
%GammaTimeOffsetsFile   GammaTimeOffsets_Eu_Cal_20119.dat
%NrOfGammaTimeOffsets  0
%GammaTimeOffsetsFile  ignore


%----------------------------------------------------------------------------------------------------------------------
% File for TDC Offsets - should be of the form: channel offset 
% Now, if the TDC offsets should not be set, change the file name to 'ignore'
% The calibration file should terminate with a line reading 'eof'
% NOTE these offsets are only for the Si channels
%----------------------------------------------------------------------------------------------------------------------
TDCOffsetsFile ignore

%----------------------------------------------------------------------------------------------------------------------
% File for GammaTime Offsets - should be of the form: channel offset 
% Now, if the TDC offsets should not be set, change the file name to 'ignore'
% The calibration file should terminate with a line reading 'eof'
% NOTE these offsets are only for the Si channels
%----------------------------------------------------------------------------------------------------------------------
%GammaTimeOffsets ignore


%----------------------------------------------------------------------------------------------------------------------
%Inputs for clover GammaTime window used in the addback
%----------------------------------------------------------------------------------------------------------------------
%152Eu
%GammaTimePromptPeakMin	-40
%GammaTimePromptPeakMax	20
%
%In beam data 
GammaTimePromptPeakMin	-600
GammaTimePromptPeakMax	300
% 
%Offprompt time window 
%GammaTimePromptPeakMin	-3273
%GammaTimePromptPeakMax	-2373



% Last line should be ConfigEnd so that the code knows that you are finished - otherwise it will not finish trying to read stuff in.
ConfigEnd
