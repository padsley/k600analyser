% CONFIG FILE FOR PR236B: 4-degree data
% Modified by Armand Bahini on 10/09/2019

%----------------------------------------------------------------------------------------------------------------------
% This file is the configuration file for K600 data. It should take the form of the global definitions at the top:
% ADCModules
% TDCModules
% NumberOfMMM/W1s
% Then, after that lot, the channel definitions for each detector which should be in the form:
% MMMADCChannels
% 1	FirstChannel	LastChannel
% 2	FirstChannel	LastChannel
% n	FirstChannel	LastChannel
% MMMADCChannels

% This should be repeated for all detectors (any detector not defined like this will be ignored.
% Then:
% MMMTDCChannels
% 1	FirstChannel	LastChannel etc.
%
% This should be repeated for all types of detector in the system. If a new type of ancillary detector system is added, 
% the person doing that needs to add the information about how the configuration file should be read in in ReadConfiguration 
% in Parameters.c
%----------------------------------------------------------------------------------------------------------------------

ADCModules	0
TDCModules	7

%NumberOfMMM	4

%MMMADCChannels
%1	pside	0	15
%1	nside	80	87
%2	pside	16	31
%2	nside	88	95
%3	pside	32	47
%3	nside	96	103
%4	pside	48	63
%4	nside	104	111
%MMMADCChannels

%MMMTDCChannels
%1	pside	816	831
%2	pside	832	847
%3	pside	848	863
%4	pside	864	879
%MMMTDCChannels

%NumberOfW1	2

%W1ADCChannels
%1	pside	0	15
%1	nside	32	47
%2	pside	16	31
%2 	nside	48	63
%W1ADCChannels

%W1TDCChannels
%1	pside	816	831
%1	nside	848	863
%2	pside	832	847
%2	nside	863	879
%W1TDCChannels

%----------------------------------------------------------------------------------------------------------------------
%                If Hagar is present, next line should read 'yes' otherwise it should read 'no'
%----------------------------------------------------------------------------------------------------------------------
%HagarUsed no

%HagarADCChannels
%96	103
%HagarADCChannels

%HagarTDCChannels
%688	695
%HagarTDCChannels

%----------------------------------------------------------------------------------------------------------------------
%                If CLovers are present, next line should read 'yes' otherwise it should read 'no'
%----------------------------------------------------------------------------------------------------------------------
%CloverUsed no

%NumberOfClover 4

%CloverADCChannels
%1 160 163
%2 164 167
%3 168 171
%4 172 175
%CloverADCChannels

%CloverTDCChannels
%1 880 883
%2 884 887
%3 888 891
%4 892 895
%CloverTDCChannels


%----------------------------------------------------------------
% 	VDC related issues
%----------------------------------------------------------------

VDC1 new
VDC2 old

VDCSeparationDistanceZ 285
VDCSeparationDistanceX 515

ThFPSCATOffsetTerms 3
0 1
1 22.3795               
2 -0.00346679         
EndThFPSCATOffsetTerms

ThFPSCATSlopeTerms 3
0 1 
1 -0.718427            
2 -3.30187e-05       
EndThFPSCATSlopeTerms


% -------------------------For converting Y to PhiSCAT---------
% 				(a1+a2*ThSCAT+...)
YPhiSCATOffset1Terms 4
0 1
1 0.30783
2 0.120934
3 -0.146862
4 0.00623476
EndYPhiSCATOffset1Terms

% 				(b1+b2*ThSCAT+...)*X
YPhiSCATOffset2Terms 4
0 1
1 -0.000391341
2 -0.000271356
3 0.000232144
4 1.9364e-06
EndYPhiSCATOffset2Terms

% 				(c1+c2*ThSCAT+...)*Y
YPhiSCATSlope1Terms 4
0 1
1 0.223762 
2 -0.0841361
3 0.0016215
4 0.0492529
EndYPhiSCATSlope1Terms

% 				(c1+c2*ThSCAT+...)*X*Y
YPhiSCATSlope2Terms 4
0 1
1 -0.00018304
2 0.000106297
3 -1.02828e-05
4 -6.73085e-05
EndYPhiSCATSlope2Terms



%----------------------------------------------------------------
% 	VDC lineshape correction parameters 
% NOTE: always the first term of the correction is 1, 
%	it plays no role in the correction
%----------------------------------------------------------------

% Correction of the form  Xnew = Xold + ( fac1*ThSCAT + fac2*ThSCAT^2 + ... )
% Correction of the form ((ThSCAT)^n)
ThSCATCorrectionTerms 6
0 1
1 -3.33595
2 -0.703904
3 0.182104
4 0.0106971
5 -0.0280857
EndThSCATCorrectionTerms

% Correction of the form  Xnew = Xold + ( fac1*ThSCAT*Xold + fac2*ThSCAT^2*Xold^2 + ... 
% Correction of the form ((ThSCAT)^n)*(X)^n
ThSCATXCorrectionTerms 1
0 1
EndThSCATXCorrectionTerms

% Correction of the form  Xnew = Xold + (fac1*ThSCAT + fac2*ThSCAT^2* + ...)*(Xold-offset) 
% Correction of the form ((ThSCAT)^n)*(X-XLineshapeOffset)
% Note: The number of CorrectionTerms is for the Parameters excluding
ThSCATXLoffCorrectionTerms 2
XLineshapeOffset 536
0 1
1 -0.001
2 0.001
EndThSCATXLoffCorrectionTerms

% Correction of the form  Xnew = Xold + ( fac1*ThSCAT + fac2*ThSCAT^2 + ... )
Y1CorrectionTerms 3
0 1
1 0.02
2 0.0035
EndY1CorrectionTerms

% Correction of the form ((TOF-TOFoffset)^n)
% This correction is normally used in the absence of a 2nd VDC, when 
% reliable angle info is not available. So only Y and TOF corrections then to be used.
% Note: The number of CorrectionTerms is for the Parameters excluding TOFLineshapeOffset
TOFCorrectionTerms 3
TOFLineshapeOffset 1950
0 1
1 -0.1
2 -0.001
EndTOFCorrectionTerms


%----------------------------------------------------------------------------------------------------------------------
% If, like me, you do a momentum/rigidity calibration of the focal plane, you need to put in your calibration 
% in the section below - Brho comes from a quadratic fit of the focal plane currently but you can use higher 
% or lower-order polynomials by changing the number after RigidityCalibration
% Note 
%----------------------------------------------------------------------------------------------------------------------

%Parameters for K600 at 4.5 degrees Analysis
RigidityCalibration 3
0 3.73992e+03
1 4.76145e-01
2 -2.95405e-05 
EndRigidityCalibration

%Parameters for K600 at 4 degrees Analysis
%RigidityCalibration 3
%0 3.73269e+03
%1 5.00183e-01
%2 -4.76092e-05 
%EndRigidityCalibration

%----------------------------------------------------------------
% 	Kinematics related issues
%----------------------------------------------------------------

% BeamEnergy given in MeV

% For a 200 MeV alpha beam after passing through 0.23 mg/cm^2 of 24Mg:
BeamEnergy 200

% For a 200 MeV alpha beam after passing through 1.33 mg/cm^2 of 26Mg:
%BeamEnergy 199.946

% For a 200 MeV alpha beam after passing through 0.7 mg/cm^2 of 58Ni:
%BeamEnergy 199.976

%For a 200 MeV alpha beam after passing through 1 mg/cm^2 of 208Pb: 
%BeamEnergy 199.977

InelasticScattering true

ScatteringAngle 4.5

%Masses in MeV/c^2
% 4He
mass1 3728.40095228
% 13C
%mass2 12112.547139
% 24Mg
mass2 22341.9226517
% 26Mg
% mass2 24202.62965
% 27Al
% mass2 25133.14158
% 28Si 
% mass2 26060.33946
% 58Ni
%mass2 53966.42487
% 120Sn
mass2 111688.176026
% 208Pb
%mass2 193729.005419

% masses 3 and 4 only need to be defined for reactions that are not inelastic scattering
% mass3
% mass4 

% masses 3 and 4 only need to be defined for reactions that are not inelastic scattering
% mass3
% mass4 

%----------------------------------------------------------------------------------------------------------------------
% File for calibration stuff - should be of the form: channel offset gain E = off + gain*adcValue
% Now, if the calibration should not be set, change the file name to 'ignore'
% The calibration file should terminate with a line reading 'eof'
%----------------------------------------------------------------------------------------------------------------------
CalibrationFile	ignore


%----------------------------------------------------------------------------------------------------------------------
% File for X1 offsets
% Due to (mostly SSC related RF) changes/drifts, the peaks in the focal plane spectrum may change slightly,
% but significantly, from run to run. 
% Your job is to determine those changes relative to a zeroth run and put them in the X1offsets file 
% in the form:   run number  delta-X
% Now, if no such offsets are to be used, change the file name to 'ignore' and the nr to 0
% Final and important note: the offsets file should terminate with a line reading 'eof'
%----------------------------------------------------------------------------------------------------------------------
%NrOfX1Offsets	0
%XOffsetsFile	ignore
NrOfX1Offsets	31
XOffsetsFile	X1offsetsPR236B.dat


%----------------------------------------------------------------------------------------------------------------------
% File for TOF offsets
% Due to SSC related RF changes, the pid may change slightly, but significantly, in time from run to run.
% Your job is to determine those changes relative to a zeroth run and put them in the TOFoffsets file
% in the form:   run number  delta-tof
% Now, if no such offsets are to be used, change the file name to 'ignore' and the nr to 0
% Final and important note: the offsets file should terminate with a line reading 'eof'
%----------------------------------------------------------------------------------------------------------------------
%NrOfTOFOffsets  0
%TOFOffsetsFile  ignore
NrOfTOFOffsets	 31
TOFOffsetsFile	 TOFoffsetsPR236B.dat

%----------------------------------------------------------------------------------------------------------------------
% File for Y offsets
% Your job is to determine those changes relative to a zeroth run and put them in the Yoffsets file
% in the form:   run number  delta-y
% Now, if no such offsets are to be used, change the file name to 'ignore' and the nr to 0
% Final and important note: the offsets file should terminate with a line reading 'eof'
%----------------------------------------------------------------------------------------------------------------------
%NrOfYOffsets  	0
%YOffsetsFile  	ignore
NrOfYOffsets	35
YOffsetsFile	YoffsetsPR236B.dat

%----------------------------------------------------------------------------------------------------------------------
% File for pad1 offsets
% Your job is to determine those changes relative to a zeroth run and put them in the PADoffsets file
% in the form:   run number  delta-pad1
% Now, if no such offsets are to be used, change the file name to 'ignore' and the nr to 0
% Final and important note: the offsets file should terminate with a line reading 'eof'
%----------------------------------------------------------------------------------------------------------------------
NrOfPadOffsets  	0
PadOffsetsFile  	ignore

%----------------------------------------------------------------------------------------------------------------------
% File for TDC Offsets - should be of the form: channel offset 
% in other words, for row i there should be only 1 number, which is the offset (in tdc chans) for TDC channel i
% Now, if the TDC offsets should not be set, change the file name to 'ignore'
% The offsetfile should terminate with a line reading 'eof'
% Also, importantly, the number of entries in the offset file must be = nr-of-TDCs*128
%----------------------------------------------------------------------------------------------------------------------
TDCOffsetsFile TDCoffsets.dat


% Last line should be ConfigEnd so that the code knows that you are finished - otherwise it will not finish trying to read stuff in.
ConfigEnd
%----------------------------------------------------------------------------------------------------------------------
