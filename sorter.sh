#!/bin/bash

#================================
#       MMM Calibration run
#   3793 is a dummy run number for the looping
#for COUNT in {3792,3793}

#================
#       14C
#   Testing (p,p')
#for COUNT in {18,19,20,30,33,36,37,38,39,40,41,42}
#   Data (p,p')
#for COUNT in {108,109,110,111,112,114}

#   Testing (p,t)
#for COUNT in {47,48,49,50}
#   Data (p,t) WE1
#for COUNT in {54,55,56,57,58,59,60,61,62,63,64,65,66,67,69,70,71,72,73,74,75,76,83,84,85,86,87,88,89,90,92,93}
#   Data (p,t) WE2
#for COUNT in {116,117,118,119,122,125,127,129,131,132,133,134,135,136,138,140,141,142,143,144,145,146,147,148,149,150,154,158,159,160,161,163,164,165,166,167,168,169,170,171,172,173,174,176,177,178,179,180,181,183,184,186,187,188,190,191,192}
#   Data (p,t) WE3
#for COUNT in {230,233,234,235,236,237,238,239,240,241,242,243,244,245,246,248,255,256,257,258,259,263,264,265,266,267,268,269,270,275,276,277,278,279,280,281,282,283,285,286,287,288,291,294,295,296,297,298,299,301,302,303,304,305,306,307,308}
#   Data (p,t) WE4
#for COUNT in {456,457,458,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,489,490,491,492,493,494,495,496,498,499,500,511,512,514,515,516,520}

#================
#   MT (p,t) WE2
#for COUNT in {162,175,182}
#   MT (p,t) WE3
#for COUNT in {247,300}
#   MT (p,t) WE4
#for COUNT in {459,513}

#Missing info, page 44
#Missing info, page 48

#================
#   INCLUSIVE
#for COUNT in {3792,18,19,20,30,33,36,37,38,39,40,41,42,108,109,110,111,112,114,47,48,49,50,54,55,56,57,58,59,60,61,62,63,64,65,66,67,69,70,71,72,73,74,75,76,83,84,85,86,87,88,89,90,92,116,117,118,119,122,125,127,129,131,133,134,135,136,138,140,141,142,144,145,146,147,148,149,150,158,159,160,161,163,164,165,166,167,168,169,170,171,172,173,174,176,177,178,179,180,181,183,184,186,188,190,230,233,234,235,236,237,238,239,240,241,242,243,244,245,246,248,255,256,257,258,259,263,264,265,266,267,268,269,270,275,276,277,278,279,280,281,282,283,285,286,287,288,291,294,295,296,297,298,299,301,302,303,304,305,306,307,308,456,457,458,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,489,490,491,492,493,494,495,496,498,499,500,511,512,514,515,516,520,162,175,182,247,300,459,513}



#for COUNT in {230,231}
#for COUNT in {63,64}


#----------------------------
# WE 3 and 4
#for COUNT in {230,233,234,235,236,237,238,239,240,241,242,243,244,245,246,248,255,256,257,258,259,263,264,265,266,267,268,269,270,275,276,277,278,279,280,281,282,283,285,286,287,288,291,294,295,296,297,298,299,301,302,303,304,305,306,307,308,456,457,458,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,489,490,491,492,493,494,495,496,498,499,500,511,512,514,515,516,520}

#for COUNT in {230,233,234,235,236,237,238,239,240,241,242,243,244,245,246,248,255,256,257,258,259,263,264,265,266,267,268,269,270,275,276,277,278,279,280,281,282,283,285,286,287,288,291,294,295,296,297,298,299,301,302,303,304,305,306,307,308,456,457,458,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,489,490,491,492,493,494,495,496,498,499,500,511,512,514,515,516,520}

#----------------------------
#       INCLUSIVE, ALL WEEKENDS (1-4)
#for COUNT in {54,55,56,57,58,59,60,61,62,63,64,65,66,67,69,70,71,72,73,74,75,76,83,84,85,86,87,88,89,90,92,116,117,118,119,122,125,127,129,131,133,134,135,136,138,140,141,142,144,145,146,147,148,149,150,158,159,160,161,163,164,165,166,167,168,169,170,171,172,173,174,176,177,178,179,180,181,183,184,186,188,190,230,233,234,235,236,237,238,239,240,241,242,243,244,245,246,248,255,256,257,258,259,263,264,265,266,267,268,269,270,275,276,277,278,279,280,281,282,283,285,286,287,288,291,294,295,301,302,303,304,305,306,307,308,456,457,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,489,490,491,492,493,494,495,496,498,499,500,511,512,514,515,516,520}




#------------------------------------------------------------------------------------
#       OLD PRUNED, WEEKENDS 1, 2 and 4 (WE 3 has been removed)
#for COUNT in {54,55,56,57,58,59,60,61,62,63,64,65,66,69,70,71,72,73,74,75,76,83,84,85,86,87,88,89,90,92,116,117,118,119,122,125,127,129,131,133,134,135,136,138,140,141,142,144,145,146,147,148,149,150,158,159,160,161,163,164,165,166,167,168,169,170,171,172,173,174,176,177,178,179,180,181,183,184,186,188,190,456,457,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,489,490,491,492,493,494,495,496,498,499,500,511,512,514,515,516,520}





#------------------------------------------------------------------------------------
#       PRUNED, WEEKENDS 1, 2 and 4 (WE 3 has been removed)
#for COUNT in {54,55,56,57,58,59,60,61,62,63,64,65,66,69,70,71,72,73,74,75,83,84,85,86,87,88,89,90,92,116,117,118,119,122,125,129,131,133,134,135,136,138,140,141,142,144,145,146,147,148,149,150,158,159,160,161,163,165,166,167,168,169,170,171,172,173,174,176,178,179,181,183,184,186,188,190,456,457,460,461,462,464,465,466,467,470,471,472,474,475,476,477,478,479,480,481,482,483,484,485,487,489,490,491,492,493,494,495,496,498,499,500,511,512,514,515,516,520}



#------------------------------------------------------------------------------------
#       INCLUSIVE (PRUNED, 54-190 and 456-520)
#for COUNT in {54,55,56,57,58,59,60,61,62,63,64,65,66,69,70,71,72,73,74,75,83,84,85,86,87,88,89,90,92,116,117,118,119,122,125,129,131,133,134,135,136,138,140,141,142,144,145,146,147,148,149,150,158,159,160,161,163,165,166,167,168,169,170,171,172,173,174,176,178,179,181,183,184,186,188,190,460,461,462,464,465,466,467,470,471,472,474,475,476,477,478,479,480,481,482,483,484,485,487,489,490,491,492,493,494,495,496,498,499,500,511,512,514,515,516,520};

#------------------------------------------------------------------------------------
#       54-190 (PRUNED)
#for COUNT in {54,55,56,57,58,59,60,61,62,63,64,65,66,69,70,71,72,73,74,75,83,84,85,86,87,88,89,90,92,116,117,118,119,122,125,129,131,133,134,135,136,138,140,141,142,144,145,146,147,148,149,150,158,159,160,161,163,165,166,167,168,169,170,171,172,173,174,176,178,179,181,183,184,186,188,190};

#------------------------------------------------------------------------------------
#       460-520 (PRUNED)
for COUNT in {460,461,462,464,465,466,467,470,471,472,474,475,476,477,478,479,480,481,482,483,484,485,487,489,490,491,492,493,494,495,496,498,499,500,511,512,514,515,516,520};


#for COUNT in {54,55};


#  Missing runs: 93
#  Discarded runs: 67, 132, 143, (154), 187, 191, 192
#  Removed (no events) 296, 297, 298, 299, 458
#  Slightly different TLC: 456, 457


#for COUNT in {54,54555}




do
#====================================================
#       Directories for the data and sorted data
#dataDirectory="/media/psf/EPHEMERAL/PR195"
dataDirectory="/media/psf/DATA/PR195/data"

#sortedDirectory="/media/psf/Home/Academic/Experiments/PR195_2017/sorted"
#sortedDirectory="/media/psf/Home/Academic/Experiments/PR195_2017/sortedNoPIDoffsets"
#sortedDirectory="/media/psf/Home/Academic/Experiments/PR195_2017/sortedTest"
#sortedDirectory="/media/psf/Home/Academic/Experiments/PR195_2017/sortedAutoTrim"
sortedDirectory="/media/psf/Home/Academic/Experiments/PR195_2017/sortedNew"
#sortedDirectory="/media/psf/Home/Academic/Experiments/PR195_2017/sortedNoXMapping"


  echo $COUNT
  if [ $COUNT -lt 10 ]
  then
      FILE=$dataDirectory"/run0000"$COUNT".mid.gz"
  elif [ $COUNT -lt 100 ]
  then
      FILE=$dataDirectory"/run000"$COUNT".mid.gz"
  elif [ $COUNT -lt 1000 ]
  then
      FILE=$dataDirectory"/run00"$COUNT".mid.gz"
  elif [ $COUNT -lt 10000 ]
  then
      FILE=$dataDirectory"/run0"$COUNT".mid.gz"
  elif [ $COUNT -lt 100000 ]
  then
      FILE=$dataDirectory"/run"$COUNT".mid.gz"
  else
      echo "This might not work"
  fi
  echo $FILE
  if [ $COUNT -lt 10 ]
  then
      FILE2=$sortedDirectory"/sorted0000"$COUNT".root"
  elif [ $COUNT -lt 100 ]
  then
      FILE2=$sortedDirectory"/sorted000"$COUNT".root"
  elif [ $COUNT -lt 1000 ]
  then
      FILE2=$sortedDirectory"/sorted00"$COUNT".root"
  elif [ $COUNT -lt 10000 ]
  then
      FILE2=$sortedDirectory"/sorted0"$COUNT".root"
  elif [ $COUNT -lt 100000 ]
  then
      FILE2=$sortedDirectory"/sorted"$COUNT".root"
  else
      echo "This might not work"
  fi
  echo $FILE2
  if [ -e $FILE ]
  then
  
      echo $FILE
      ./analyzer -i $FILE
      mv output.root $FILE2
      
      
#      if [ ! -e $FILE2 ]
#      then
#      echo $FILE
#      ./analyzer -i $FILE
#      mv output.root $FILE2
#      cp output.root $FILE2
#      fi
  fi
done
